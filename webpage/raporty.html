<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Raporty wiezienne</title>
    <link rel="stylesheet" href="public/style/styleRaports.css">
</head>
<body>
    <div id="formularzDiv">
        <ol id="olRaport">

        </ol>
        <p id="welcomeP">Ponizej znajduja sie dostepne raporty. <br>
            <button id="btnAllPrisoners"> Pokaż więźniów! </button>
            
        </p>
    </div>
</body>
<script>

    /* Raport wszystkich więźniów */
    const btnAllPrisoners = document.getElementById("btnAllPrisoners");
    btnAllPrisoners.addEventListener("click", async e=>{
        readAllPrisoners()
        if(!result.success) 
            alert("Failed");
    })

    //readAllPrisoners();
    async function readAllPrisoners(){
        try{
            const olRaport = document.getElementById("olRaport");
            while(olRaport.firstChild)
                olRaport.removeChild(olRaport.firstChild);

            const result = await fetch("http://localhost:8080/wszyscy_wiezniowie", {method:"GET"})
            const raport = await result.json();
            raport.forEach(t=>{
                const li = document.createElement("li");
                li.textContent = t.imie +" "+ t.nazwisko+" "+t.wyrok;
                li.id = t.id;
                olRaport.appendChild(li);
            })
        }
        catch(e){
            console.log("Error reading all prisoners");
        }
    }
</script>
</html>